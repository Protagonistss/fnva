#!/bin/bash
# Bash/Zsh LLM/CC Environment Switch - {{env_name}}
# Generated by fnva

{{#if config.anthropic_auth_token}}
# Anthropic/GLM-CC environment
export ANTHROPIC_AUTH_TOKEN="{{config.anthropic_auth_token}}"
{{/if}}

{{#if config.anthropic_base_url}}
export ANTHROPIC_BASE_URL="{{config.anthropic_base_url}}"
{{/if}}

{{#if config.default_model}}
export ANTHROPIC_DEFAULT_SONNET_MODEL="{{config.default_model}}"
{{/if}}

{{#if config.api_key}}
export OPENAI_API_KEY="{{config.api_key}}"
{{/if}}

{{#if config.openai_base_url}}
export OPENAI_API_BASE="{{config.openai_base_url}}"
{{/if}}

{{#if config.base_url}}
export OPENAI_API_BASE="{{config.base_url}}"
{{/if}}

{{#if config.model}}
export OPENAI_MODEL="{{config.model}}"
{{/if}}

{{#if config.temperature}}
export OPENAI_TEMPERATURE="{{config.temperature}}"
{{/if}}

{{#if config.max_tokens}}
export OPENAI_MAX_TOKENS="{{config.max_tokens}}"
{{/if}}

# Set fnva environment tracking
export FNVA_CURRENT_{{#if (eq env_type "Cc")}}CC{{else}}LLM{{/if}}="{{env_name}}"
export FNVA_ENV_TYPE="{{#if (eq env_type "Cc")}}CC{{else}}LLM{{/if}}"

# Claude Code specific settings
{{#if config.anthropic_auth_token}}
export CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC="1"
export API_TIMEOUT_MS="30000"
{{/if}}

# Verify the switch
echo "âœ… Switched to {{#if (eq env_type "Cc")}}Claude Code (CC){{else}}LLM{{/if}} environment: {{env_name}}"

{{#if config.anthropic_auth_token}}
echo "ðŸ”‘ Anthropic Auth Token: âœ“"
{{/if}}

{{#if config.anthropic_base_url}}
echo "ðŸŒ Base URL: {{config.anthropic_base_url}}"
{{/if}}

{{#if config.default_model}}
echo "ðŸ¤– Default Model: {{config.default_model}}"
{{/if}}

# Add to shell history
echo "fnva {{#if (eq env_type "Cc")}}cc{{else}}llm{{/if}} use {{env_name}}" >> ~/.fnva/history 2>/dev/null || true